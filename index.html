<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Diwali Fireworks Simulator ✨🎆</title>
<style>
  * {
    margin: 0;
    padding: 0;
    box-sizing: border-box;
  }

  body {
    font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
    background: linear-gradient(180deg, #0a0e27 0%, #1a1535 50%, #2a1a3a 100%);
    color: #fff;
    overflow-x: hidden;
    min-height: 100vh;
    position: relative;
  }

  /* Stars background */
  .stars {
    position: fixed;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    pointer-events: none;
    z-index: 1;
  }

  .star {
    position: absolute;
    background: white;
    border-radius: 50%;
    animation: twinkle 3s infinite;
  }

  @keyframes twinkle {
    0%, 100% { opacity: 0.3; transform: scale(1); }
    50% { opacity: 1; transform: scale(1.2); }
  }

  /* Main container */
  .container {
    position: relative;
    z-index: 2;
    max-width: 1400px;
    margin: 0 auto;
    padding: 20px;
    display: flex;
    flex-direction: column;
    min-height: 100vh;
  }

  /* Header */
  header {
    text-align: center;
    padding: 30px 20px;
    background: linear-gradient(135deg, rgba(255,107,107,0.1), rgba(255,193,7,0.1));
    border-radius: 20px;
    backdrop-filter: blur(10px);
    border: 1px solid rgba(255,255,255,0.1);
    margin-bottom: 20px;
  }

  h1 {
    font-size: 2.5em;
    background: linear-gradient(45deg, #ff6b6b, #ffd93d, #6bcf7f, #4d96ff);
    -webkit-background-clip: text;
    -webkit-text-fill-color: transparent;
    background-clip: text;
    margin-bottom: 10px;
    text-shadow: 0 0 30px rgba(255,255,255,0.3);
  }

  .subtitle {
    font-size: 1.1em;
    color: #ffeb3b;
    opacity: 0.9;
  }

  /* Canvas container */
  .canvas-wrapper {
    position: relative;
    flex: 1;
    background: linear-gradient(180deg, rgba(0,0,0,0.2), rgba(0,0,0,0.4));
    border-radius: 20px;
    overflow: hidden;
    border: 2px solid rgba(255,255,255,0.1);
    min-height: 500px;
    margin-bottom: 20px;
  }

  #fireworksCanvas {
    display: block;
    width: 100%;
    height: 100%;
    cursor: crosshair;
  }

  /* Diyas at bottom */
  .diyas-container {
    position: absolute;
    bottom: 20px;
    left: 0;
    right: 0;
    display: flex;
    justify-content: center;
    gap: 30px;
    padding: 0 20px;
    pointer-events: none;
    z-index: 10;
  }

  .diya {
    width: 50px;
    height: 50px;
    position: relative;
    animation: float 3s ease-in-out infinite;
  }

  .diya:nth-child(2) { animation-delay: 0.5s; }
  .diya:nth-child(3) { animation-delay: 1s; }
  .diya:nth-child(4) { animation-delay: 1.5s; }
  .diya:nth-child(5) { animation-delay: 2s; }

  @keyframes float {
    0%, 100% { transform: translateY(0px); }
    50% { transform: translateY(-8px); }
  }

  .diya-body {
    width: 100%;
    height: 30px;
    background: linear-gradient(135deg, #ff8c00, #ff4500);
    border-radius: 0 0 50% 50%;
    box-shadow: 0 5px 15px rgba(255,69,0,0.5);
  }

  .flame {
    position: absolute;
    top: -20px;
    left: 50%;
    transform: translateX(-50%);
    width: 20px;
    height: 30px;
    background: radial-gradient(circle at center, #fff, #ffeb3b 30%, #ff9800 60%, transparent);
    border-radius: 50% 50% 20% 20%;
    animation: flicker 0.3s infinite alternate;
    filter: blur(1px);
  }

  @keyframes flicker {
    0% { transform: translateX(-50%) scale(1) translateY(0); }
    100% { transform: translateX(-50%) scale(1.1) translateY(-3px); }
  }

  /* Controls panel */
  .controls {
    background: linear-gradient(135deg, rgba(30,30,60,0.9), rgba(50,30,70,0.9));
    padding: 25px;
    border-radius: 20px;
    backdrop-filter: blur(10px);
    border: 1px solid rgba(255,255,255,0.2);
  }

  .control-row {
    display: flex;
    gap: 15px;
    flex-wrap: wrap;
    margin-bottom: 20px;
    align-items: center;
  }

  .control-row:last-child {
    margin-bottom: 0;
  }

  button {
    padding: 15px 30px;
    font-size: 1.1em;
    border: none;
    border-radius: 12px;
    cursor: pointer;
    font-weight: bold;
    transition: all 0.3s;
    text-transform: uppercase;
    letter-spacing: 1px;
  }

  .btn-launch {
    background: linear-gradient(135deg, #ff6b6b, #ee5a24);
    color: white;
    box-shadow: 0 5px 20px rgba(255,107,107,0.4);
  }

  .btn-launch:hover {
    transform: translateY(-2px);
    box-shadow: 0 7px 25px rgba(255,107,107,0.6);
  }

  .btn-launch:active {
    transform: translateY(0);
  }

  .btn-auto {
    background: linear-gradient(135deg, #4d96ff, #357ae8);
    color: white;
    box-shadow: 0 5px 20px rgba(77,150,255,0.4);
  }

  .btn-auto:hover {
    transform: translateY(-2px);
    box-shadow: 0 7px 25px rgba(77,150,255,0.6);
  }

  .btn-clear {
    background: linear-gradient(135deg, #6c757d, #495057);
    color: white;
    padding: 12px 20px;
    font-size: 0.95em;
  }

  .btn-clear:hover {
    background: linear-gradient(135deg, #5a6268, #343a40);
  }

  .slider-group {
    flex: 1;
    min-width: 200px;
  }

  .slider-group label {
    display: block;
    margin-bottom: 8px;
    font-size: 0.95em;
    color: #ffd93d;
  }

  input[type="range"] {
    width: 100%;
    height: 8px;
    border-radius: 5px;
    background: rgba(255,255,255,0.2);
    outline: none;
    -webkit-appearance: none;
  }

  input[type="range"]::-webkit-slider-thumb {
    -webkit-appearance: none;
    width: 20px;
    height: 20px;
    border-radius: 50%;
    background: linear-gradient(135deg, #ffd93d, #ff6b6b);
    cursor: pointer;
    box-shadow: 0 2px 10px rgba(255,107,107,0.5);
  }

  input[type="range"]::-moz-range-thumb {
    width: 20px;
    height: 20px;
    border-radius: 50%;
    background: linear-gradient(135deg, #ffd93d, #ff6b6b);
    cursor: pointer;
    border: none;
    box-shadow: 0 2px 10px rgba(255,107,107,0.5);
  }

  .stats {
    display: flex;
    gap: 20px;
    flex-wrap: wrap;
    margin-top: 15px;
    padding-top: 15px;
    border-top: 1px solid rgba(255,255,255,0.1);
  }

  .stat {
    background: rgba(255,255,255,0.1);
    padding: 10px 20px;
    border-radius: 10px;
    font-size: 0.95em;
  }

  .stat strong {
    color: #ffd93d;
    font-size: 1.2em;
    margin-left: 5px;
  }

  /* Mobile responsiveness */
  @media (max-width: 768px) {
    h1 {
      font-size: 1.8em;
    }

    .subtitle {
      font-size: 0.95em;
    }

    header {
      padding: 20px 15px;
    }

    .container {
      padding: 10px;
    }

    .canvas-wrapper {
      min-height: 400px;
      margin-bottom: 15px;
    }

    .controls {
      padding: 20px 15px;
    }

    .control-row {
      flex-direction: column;
      gap: 12px;
    }

    button {
      width: 100%;
      padding: 12px 20px;
      font-size: 1em;
    }

    .slider-group {
      width: 100%;
      min-width: unset;
    }

    .diyas-container {
      gap: 15px;
      bottom: 10px;
    }

    .diya {
      width: 35px;
      height: 35px;
    }

    .stats {
      flex-direction: column;
      gap: 10px;
    }

    .stat {
      text-align: center;
    }
  }

  @media (max-width: 480px) {
    h1 {
      font-size: 1.5em;
    }

    .canvas-wrapper {
      min-height: 350px;
    }

    .diyas-container {
      gap: 10px;
    }

    .diya {
      width: 30px;
      height: 30px;
    }

    .diya-body {
      height: 20px;
    }

    .flame {
      width: 15px;
      height: 20px;
      top: -15px;
    }
  }

  /* Instruction tooltip */
  .instruction {
    text-align: center;
    padding: 10px;
    background: rgba(255,235,59,0.15);
    border-radius: 10px;
    margin-bottom: 15px;
    font-size: 0.9em;
    color: #ffeb3b;
  }
  .footer {
  position: fixed;
  bottom: 8px;
  right: 15px;
  font-size: 0.9em;
  color: #ffd93d;
  opacity: 0.9;
  font-weight: 500;
  z-index: 20;
  background: rgba(0, 0, 0, 0.4);
  padding: 6px 12px;
  border-radius: 12px;
  backdrop-filter: blur(4px);
  box-shadow: 0 0 10px rgba(255,217,61,0.3);
  animation: glowText 2s ease-in-out infinite alternate;
}

@keyframes glowText {
  from { text-shadow: 0 0 5px #ffd93d, 0 0 10px #ffeb3b; }
  to { text-shadow: 0 0 15px #fff, 0 0 25px #ffd93d; }
}

</style>
</head>
<body>
  <!-- Stars background -->
  <div class="stars" id="starsContainer"></div>

  <div class="container">
    <header>
      <h1>✨ Diwali Fireworks Simulator 🎆</h1>
      <p class="subtitle">Celebrate the Festival of Lights with Amazing Fireworks!</p>
    </header>

    <div class="instruction">
      👆 Tap or click anywhere on the sky to launch fireworks!
    </div>

    <div class="canvas-wrapper">
      <canvas id="fireworksCanvas"></canvas>
      
      <!-- Diyas at bottom -->
      <div class="diyas-container">
        <div class="diya">
          <div class="flame"></div>
          <div class="diya-body"></div>
        </div>
        <div class="diya">
          <div class="flame"></div>
          <div class="diya-body"></div>
        </div>
        <div class="diya">
          <div class="flame"></div>
          <div class="diya-body"></div>
        </div>
        <div class="diya">
          <div class="flame"></div>
          <div class="diya-body"></div>
        </div>
        <div class="diya">
          <div class="flame"></div>
          <div class="diya-body"></div>
        </div>
      </div>
    </div>

    <div class="controls">
      <div class="control-row">
        <button class="btn-launch" id="launchBtn">🚀 Launch Firework</button>
        <button class="btn-auto" id="autoBtn">⚡ Auto Mode: OFF</button>
        <button class="btn-clear" id="clearBtn">🧹 Clear</button>
      </div>

      <div class="control-row">
        <div class="slider-group">
          <label>Particles: <span id="particleValue">100</span></label>
          <input type="range" id="particleSlider" min="50" max="200" value="100">
        </div>
        <div class="slider-group">
          <label>Speed: <span id="speedValue">5</span></label>
          <input type="range" id="speedSlider" min="3" max="10" value="5">
        </div>
      </div>

      <div class="stats">
        <div class="stat">Fireworks Launched: <strong id="launchCount">0</strong></div>
        <div class="stat">Active Particles: <strong id="particleCount">0</strong></div>
      </div>
    </div>
  </div>
  <footer class="footer">
    Made with ❤️ by Garg Family
  </footer>
  
<script>
// Create stars
const starsContainer = document.getElementById('starsContainer');
for (let i = 0; i < 100; i++) {
  const star = document.createElement('div');
  star.className = 'star';
  star.style.left = Math.random() * 100 + '%';
  star.style.top = Math.random() * 60 + '%';
  star.style.width = star.style.height = (Math.random() * 2 + 1) + 'px';
  star.style.animationDelay = Math.random() * 3 + 's';
  starsContainer.appendChild(star);
}

// Canvas setup
const canvas = document.getElementById('fireworksCanvas');
const ctx = canvas.getContext('2d');

function resizeCanvas() {
  const wrapper = canvas.parentElement;
  canvas.width = wrapper.clientWidth;
  canvas.height = wrapper.clientHeight;
}
resizeCanvas();
window.addEventListener('resize', resizeCanvas);

// Firework system
let particles = [];
let rockets = [];
let launchCount = 0;
let autoMode = false;
let autoInterval;

// Controls
const launchBtn = document.getElementById('launchBtn');
const autoBtn = document.getElementById('autoBtn');
const clearBtn = document.getElementById('clearBtn');
const particleSlider = document.getElementById('particleSlider');
const speedSlider = document.getElementById('speedSlider');
const particleValue = document.getElementById('particleValue');
const speedValue = document.getElementById('speedValue');
const launchCountEl = document.getElementById('launchCount');
const particleCountEl = document.getElementById('particleCount');

particleSlider.addEventListener('input', (e) => {
  particleValue.textContent = e.target.value;
});

speedSlider.addEventListener('input', (e) => {
  speedValue.textContent = e.target.value;
});

// Particle class
class Particle {
  constructor(x, y, vx, vy, color, size = 2) {
    this.x = x;
    this.y = y;
    this.vx = vx;
    this.vy = vy;
    this.color = color;
    this.size = size;
    this.alpha = 1;
    this.decay = Math.random() * 0.015 + 0.01;
    this.gravity = 0.08;
  }

  update() {
    this.vy += this.gravity;
    this.x += this.vx;
    this.y += this.vy;
    this.alpha -= this.decay;
    this.vx *= 0.99;
  }

  draw() {
    ctx.save();
    ctx.globalAlpha = this.alpha;
    ctx.fillStyle = this.color;
    ctx.beginPath();
    ctx.arc(this.x, this.y, this.size, 0, Math.PI * 2);
    ctx.fill();
    
    // Glow effect
    ctx.globalAlpha = this.alpha * 0.5;
    ctx.beginPath();
    ctx.arc(this.x, this.y, this.size * 2, 0, Math.PI * 2);
    ctx.fill();
    ctx.restore();
  }
}

// Rocket class
class Rocket {
  constructor(x, targetY) {
    this.x = x;
    this.y = canvas.height;
    this.targetY = targetY;
    this.vx = (Math.random() - 0.5) * 2;
    this.vy = -8 - Math.random() * 2;
    this.color = '#fff';
    this.size = 3;
    this.exploded = false;
  }

  update() {
    this.vy += 0.1;
    this.x += this.vx;
    this.y += this.vy;

    // Create trail
    particles.push(new Particle(
      this.x,
      this.y,
      (Math.random() - 0.5) * 0.5,
      Math.random() * 1,
      'rgba(255,220,100,0.8)',
      1.5
    ));

    // Check if reached target height or started falling
    if (this.y <= this.targetY || this.vy > 0) {
      this.explode();
      this.exploded = true;
    }
  }

  draw() {
    ctx.fillStyle = this.color;
    ctx.beginPath();
    ctx.arc(this.x, this.y, this.size, 0, Math.PI * 2);
    ctx.fill();
  }

  explode() {
    const particleCount = parseInt(particleSlider.value);
    const speed = parseInt(speedSlider.value);
    const colors = [
      '#ff0000', '#ff4500', '#ffd700', '#00ff00', '#00ffff',
      '#0080ff', '#8000ff', '#ff00ff', '#ff1493', '#ffffff'
    ];
    const color = colors[Math.floor(Math.random() * colors.length)];

    for (let i = 0; i < particleCount; i++) {
      const angle = (Math.PI * 2 * i) / particleCount;
      const velocity = (Math.random() * speed + speed * 0.5);
      const vx = Math.cos(angle) * velocity;
      const vy = Math.sin(angle) * velocity;
      
      particles.push(new Particle(
        this.x,
        this.y,
        vx,
        vy,
        color,
        Math.random() * 2 + 1
      ));
    }

    // Add secondary burst
    for (let i = 0; i < particleCount / 2; i++) {
      const angle = Math.random() * Math.PI * 2;
      const velocity = Math.random() * speed * 0.7;
      const vx = Math.cos(angle) * velocity;
      const vy = Math.sin(angle) * velocity;
      
      const secondColor = colors[Math.floor(Math.random() * colors.length)];
      particles.push(new Particle(
        this.x,
        this.y,
        vx,
        vy,
        secondColor,
        Math.random() * 1.5 + 0.5
      ));
    }
  }
}

// Launch firework
function launchFirework(x, y) {
  // Ensure x is within bounds with padding
  const padding = 50;
  x = Math.max(padding, Math.min(canvas.width - padding, x));
  
  // Target height between 20% and 50% of canvas height
  const targetY = canvas.height * 0.2 + Math.random() * canvas.height * 0.3;
  
  rockets.push(new Rocket(x, targetY));
  launchCount++;
  launchCountEl.textContent = launchCount;
}

// Animation loop
function animate() {
  ctx.fillStyle = 'rgba(10, 14, 39, 0.15)';
  ctx.fillRect(0, 0, canvas.width, canvas.height);

  // Update and draw rockets
  for (let i = rockets.length - 1; i >= 0; i--) {
    rockets[i].update();
    rockets[i].draw();
    
    if (rockets[i].exploded) {
      rockets.splice(i, 1);
    }
  }

  // Update and draw particles
  for (let i = particles.length - 1; i >= 0; i--) {
    particles[i].update();
    particles[i].draw();
    
    if (particles[i].alpha <= 0 || particles[i].y > canvas.height + 50) {
      particles.splice(i, 1);
    }
  }

  particleCountEl.textContent = particles.length;
  requestAnimationFrame(animate);
}

animate();

// Event listeners
launchBtn.addEventListener('click', () => {
  const x = canvas.width * 0.3 + Math.random() * canvas.width * 0.4;
  launchFirework(x, 0);
});

canvas.addEventListener('click', (e) => {
  const rect = canvas.getBoundingClientRect();
  const x = e.clientX - rect.left;
  const y = e.clientY - rect.top;
  launchFirework(x, y);
});

canvas.addEventListener('touchstart', (e) => {
  e.preventDefault();
  const rect = canvas.getBoundingClientRect();
  const touch = e.touches[0];
  const x = touch.clientX - rect.left;
  const y = touch.clientY - rect.top;
  launchFirework(x, y);
});

autoBtn.addEventListener('click', () => {
  autoMode = !autoMode;
  if (autoMode) {
    autoBtn.textContent = '⚡ Auto Mode: ON';
    autoBtn.style.background = 'linear-gradient(135deg, #00ff00, #00cc00)';
    autoInterval = setInterval(() => {
      const x = canvas.width * 0.2 + Math.random() * canvas.width * 0.6;
      launchFirework(x, 0);
    }, 1000);
  } else {
    autoBtn.textContent = '⚡ Auto Mode: OFF';
    autoBtn.style.background = 'linear-gradient(135deg, #4d96ff, #357ae8)';
    clearInterval(autoInterval);
  }
});

clearBtn.addEventListener('click', () => {
  particles = [];
  rockets = [];
  ctx.fillStyle = 'rgba(10, 14, 39, 1)';
  ctx.fillRect(0, 0, canvas.width, canvas.height);
});

// Keyboard support
document.addEventListener('keydown', (e) => {
  if (e.code === 'Space') {
    e.preventDefault();
    const x = canvas.width * 0.3 + Math.random() * canvas.width * 0.4;
    launchFirework(x, 0);
  }
});

// Initial firework
setTimeout(() => {
  launchFirework(canvas.width / 2, 0);
}, 500);
</script>
</body>
</html>